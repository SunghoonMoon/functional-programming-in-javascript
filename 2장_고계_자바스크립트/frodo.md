# 2장 고계 자바스크립트

### 자바스크립트 특징

- 널리 쓰임
  ⇒ 모바일 애플리케이션, 웹사이트, 웹 서버, 데스크톱에서 임베디드, DB까지 사용
  ⇒ 웹 세상을 대표하는 언어!
- 동적 언어
  ⇒ 일반화한 다형성 함수를 지원
- 함수형 언어 + 객체지향 언어
  ⇒ 객체지향과 함수형의 차이점은 데이터(객체 속성)와 기능(함수)을 조직하는 방법에 있음
  ⇒ 상태 변환 관리에 특히 신경을 써야함!
- 함수가 일급 객체
- this가 가리키는 대상은 어휘적 콘텍스트가 아니라 함수를 사용하는 방법에 따라 달라짐
  ⇒ 이해하기 어려운 코드가 될 수 있으므로 this 자제 필요!

<aside>
💡 컴퓨터 프로그래밍 언어 디자인에서, **일급 객체**란 다른 객체들에 일반적으로 적용 가능한 연산을 모두 지원하는 객체를 가리킨다. 보통 함수에 인자로 넘기기, 수정하기, 변수에 대입하기와 같은 연산을 지원할 때 일급 객체라고 한다.

</aside>

### 객체지향 프로그램

⇒ 데이터와 데이터 관계의 본질에 초점을 둠!

- 인스턴스 메소드를 통해 가변 상태를 노출하고 조작
- 캡슐화에 의존해서 가변 상태의 무결성을 유지
- 객체의 데이터와 잘게 나뉜 기능이 단단히 유착되어 응집도가 높은 패키지 형성
  ⇒ 추상화의 주요 형태가 객체!!
- 특정 기능이 구현된 여러 자료형을 논리적으로 연결해서 사용
- this 사용!

```jsx
get fullname(){
	return [this._firstname, this._lastname].join(' ');
}
```

### 함수형 프로그램

⇒ 기능에 초점을 둠!

- 데이터를 숨기지 않음
  ⇒ But 소규모 + 단순한 자료형만을 대상으로 움직임
- 불변성 유지
  ⇒ 객체를 직접 만져도 무관
  ⇒ 하지만 보통 객체 스코프 밖에 위치한 일반적인 함수를 거침
- 데이터와 기능을 느슨하게 결합
  ⇒ 함수형 코드는 여러 자료형에 적용 가능한 연산에 의존
  ⇒ 추상화의 주요 형태가 함수!!
- 합성을 통해 연산을 묶어서 사용
- 매개변수로 전달!
  (this 사용 X)
- 함수를 값으로 취급!

```jsx
const fullname = (person) => [person.firstname, person.lastname].join(' ');
```

---

### 자바스크립트 객체의 상태 관리

- 상태(state) : 어느 한 시점에 찍은 모든 객체에 저장된 데이터의 스냅샷
- 불변성을 바탕으로 사고하려면 사실상 모든 객체를 값으로 취급해야 함!

1. 객체 구조가 단순하면 값 객체 패턴 이용해서 불변성
2. 객체 구조가 깊으면 deepFreeze 구현 및 사용해서 불변성
   - deepFreeze 코드
     ```jsx
     const isObject = (val) => val && typeof val === 'object';

     function deepFreeze(obj) {
       if (isObject(obj) && !Object.isFrozen(obj)) {
         Object.keys(obj).forEach((name) => deepFreeze(obj[name]));
         Object.freeze(obj);
       }
       return obj;
     }
     ```
3. 함수형 레퍼런스 또는 렌즈 사용 (렌즈는 하스켈에서 나온 용어)
   ⇒ 상태형 자료형의 속성에 접근!
   ⇒ get, set 을 렌즈를 통해서 접근!

---

### 함수

- 표현식(expression) : 값을 내는 함수
- 구문(statement) : 값을 내지 않는 함수
- FP 에서는 `null`이나 `undefined`가 아닌 사용 가능한 결과를 낼 경우에만 유의미
  ⇒ 표현식만 유의미!

### 고계 함수

- 함수를 다루는 함수
  ⇒ FP에서는 함수를 값으로 취급하기 때문에 함수를 인수로 전달하거나 반환 할 수 있음

---

### 클로저

- 함수를 선언할 당시의 환경에 함수를 묶어둔 자료구조
- 함수의 스코프를 상속
- 함수 선언부의 물리적 위치에 의존
  ⇒ 정적 스코프 / 어휘 스코프

⇒ 클로저를 사용하면 명확하고 가독성 높은 코드 작성 가능!

<aside>
💡 클로저가 자신의 부모를 레퍼런스로 가리킨다는 점에서 객체의 메소드가 자신이 상속한 인스턴스 변수에 접근하는 것과 동일!

</aside>

### 클로저 응용

- Private 모방 가능
  ⇒ 모듈 패턴
  ⇒ 즉시 실행 함수(IIFE)를 사용해서 필요한 기능만 export 하도록 구현
- 서버 측 비동기 호출
- 가상의 블록 스코프 변수를 생성
  ⇒ 자바스크립트는 블록 스코프 개념이 없음
